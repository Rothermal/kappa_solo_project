var myApp=angular.module("myApp",["ngRoute","ngMaterial","ngAnimate","md.data.table"]);myApp.config(["$routeProvider","$locationProvider","$mdThemingProvider",function(a,b,c){var d={50:"#388338",100:"#317131",200:"#296029",300:"#214e21",400:"#1a3c1a",500:"122A12",600:"#0a180a",700:"#030603",800:"#000000",900:"#000000",A100:"#409540",A200:"#48a748",A400:"#53b553",A700:"#000000"};c.definePalette("customPrimary",d);var e={50:"#0f110f",100:"#1a1f1a",200:"#262d26",300:"#313b31",400:"#3d493d",500:"#485748",600:"#607360",700:"#6b816b",800:"#778e77",900:"#859a85",A100:"#607360",A200:"#546554",A400:"#485748",A700:"#93a593"};c.definePalette("customAccent",e);var f={50:"#4e764e",100:"#446644",200:"#395739",300:"#2f482f",400:"#253825",500:"#1B291B",600:"#111a11",700:"#070a07",800:"#000000",900:"#000000",A100:"#588558",A200:"#629562",A400:"#6fa06f",A700:"#000000"};c.definePalette("customWarn",f);var g={50:"#b7c2b7",100:"#aab6aa",200:"#9cab9c",300:"#8e9f8e",400:"#809380",500:"#738773",600:"#677967",700:"#5c6b5c",800:"#505e50",900:"#445044",A100:"#c5cec5",A200:"#d3d9d3",A400:"#e1e5e1",A700:"#384238"};c.definePalette("customBackground",g),c.theme("default").primaryPalette("customPrimary").accentPalette("customAccent").warnPalette("customWarn").backgroundPalette("customBackground"),a.when("/",{templateUrl:"assets/views/templates/home.html",controller:"HomeController"}).when("/addcustomer",{templateUrl:"assets/views/templates/addcustomer.html",controller:"CustomerController"}).when("/addrepair",{templateUrl:"assets/views/templates/addrepair.html",controller:"RepairController"}).when("/addvehicle",{templateUrl:"assets/views/templates/addvehicle.html",controller:"VehicleController"}).when("/addparts",{templateUrl:"assets/views/templates/addParts.html",controller:"PartsController"}).otherwise({redirectTo:"/"}),b.html5Mode(!0)}]),myApp.controller("CustomerController",["$scope","CustomerService",function(a,b){var c=b;a.test=c.test,a.title="This is the Customer Controller",a.customer={},a.newCustomer=function(b){console.log(b),c.postCustomer(b),a.customer={}}}]),myApp.controller("HomeController",["$scope","$http","CustomerService","HomeService","PartsService","VehicleService","$mdDialog","$mdMedia",function(a,b,c,d,e,f,g,h){var i=c,j=d,k=e,l=f;a.repairTypeArray=["Starting and Charging","Engine Diagnostics","Engine Electrical","Engine Mechanical","Steering and Suspension","Heating and Cooling","Brakes","Maintenance"],a.vendorArray=["Napa","AutoZone","CarQuest","O'Reilly's","Advance","Factory","Dealership","Amazon","Ebay","Red Rooster"],a.test=i.test,a.title="",a.repairs=[],a.part={},a.parts=[],a.deleteRepair=function(a){console.log("clicked",a),k.deletePart(a),i.deleteRepair(a)},a.getRepairs=function(){j.getRepairs(),a.repairs=j.repairs},a.customFullscreen=h("xs")||h("sm"),a.getParts=function(b){console.log(b),k.getParts(b),a.parts=k.parts},a.edit=function(b,c){console.log("hit edit"),console.log(c),c.date_of_repair=new Date(c.date_of_repair),a.repair=c,a.repair.parts=a.parts,console.log(a.repair);(h("sm")||h("xs"))&&a.customFullscreen;g.show({templateUrl:"/assets/views/templates/editRepair.html",parent:angular.element(document.body),targetEvent:b,clickOutsideToClose:!0,scope:a,preserveScope:!0}).then(function(b){a.getRepairs()},function(){a.getRepairs()}),a.$watch(function(){return h("xs")||h("sm")},function(b){a.customFullscreen=b===!0})},a.hide=function(){g.hide()},a.cancel=function(){g.cancel()},a.answer=function(a,b){g.hide(a),j.updateRepair(b),j.updateCustomer(b),k.updatePart(b.parts),l.updateVehicle(b)},a.selected=[],a.query={order:"id",limit:10,page:1},a.getRepairs()}]),myApp.controller("LoginController",["$scope","CustomerService","LoginService",function(a,b,c){var d=b,e=c;a.User={},a.newUser={},a.test=d.test,a.title="Melancholy Motors . . .",a.login="Log in . . . to continue . . .",a.loginFunction=function(b){e.login(b),a.User={}},a.goRegister=function(){console.log("go register"),e.goRegister()},a.goLogin=function(){console.log("go login"),e.goLogin()},a.registerUser=function(b){console.log(b),b.password!==b.verifyPassword?(alert("passwords did not match, please try again"),a.newUser.password="",a.newUser.verifyPassword=""):(e.register(b),a.newUser={})}}]),myApp.controller("MainController",["$scope",function(a){a.header="Melancholy Motors . . . ."}]),myApp.controller("PartsController",["$scope","CustomerService","PartsService","HomeService",function(a,b,c,d){var e=d,f=c;a.vendorArray=["Napa","AutoZone","CarQuest","O'Reilly's","Advance","Factory","Dealership","Amazon","Ebay","Red Rooster"],a.part={},a.repairs=[],a.getRepairs=function(){e.getRepairs(),a.repairs=e.repairs},a.addPart=function(b,c){console.log("clicked",b,c),b.repair_id=c.charAt(0)+c.charAt(1)+c.charAt(2),f.postParts(b),a.part={}},a.getRepairs()}]),myApp.controller("ProgressWheel",["$interval",function(a){var b=this;b.activated=!1,b.determinateValue=30,a(function(){b.determinateValue+=1,b.determinateValue>100&&(b.determinateValue=30)},100)}]),myApp.controller("RepairController",["$scope","CustomerService",function(a,b){function c(b){console.log("customer id",b),a.repair.customer_id=b}var d=b;a.repairTypeArray=["Starting and Charging","Engine Diagnostics","Engine Electrical","Engine Mechanical","Steering and Suspension","Heating and Cooling","Brakes","Maintenance"],a.customers=[],a.vehicles=[],a.repair={},a.test=d.test,a.title="This is the Repair Controller",a.getCustomers=function(){d.customerList()},a.getVehicles=function(a){console.log("clicked",a),d.vehicleList(a),c(a)},a.setVehicleid=function(b){console.log("vehicle id",b),a.repair.vehicle_id=b},a.postRepair=function(b){console.log(b),d.postRepair(b),a.repair={}},a.customers=d.customers,a.vehicles=d.vehicles,a.getCustomers()}]),myApp.controller("SidenavController",["$scope","$mdSidenav",function(a){}]),myApp.controller("VehicleController",["$scope","CustomerService","VehicleService",function(a,b,c){var d=c,e=b;a.customers=[],a.years=[],a.makes=[],a.models=[],a.engines=[],a.vehicle={},a.getCustomers=function(){e.customerList()},a.saveCustomerId=function(b){a.makes=[],a.models=[],a.engines=[],a.vehicle.year="",console.log("customer id",b),a.vehicle.customer_id=b,console.log("$scoped id",a.vehicle.customer_id)},a.getYearsArray=function(){a.years=d.years},a.getMakesList=function(b){a.makes=[],a.models=[],a.engines=[],a.vehicle.make="",a.vehicle.model="",a.vehicle.engine="",d.getMakes(b),a.makes=d.makes},a.getModelsList=function(b){a.models=[],a.engines=[];for(var c=0;c<b.models.length;c++)a.models.push(b.models[c])},a.getEngine=function(b){a.vehicle.model=b,a.engines=[],d.getEngines(a.vehicle),a.engines=d.engines},a.postVehicle=function(b){console.log(b),d.postVehicle(b),a.vehicle={}},a.customers=e.customers,a.getCustomers(),d.setYears(),a.getYearsArray()}]),console.log("grunt is watching"),myApp.factory("CustomerService",["$http",function(a){var b={},c={},d="",e=function(){a.get("/customers").then(function(a){console.log("customers in factory",a),b.object=a.data})},f=function(b){a.get("/vehicles/"+b).then(function(a){console.log("response in factory, vehicle list",a),c.object=a.data})},g=function(b){a.post("/repairs",b).then(function(a){console.log("response in post repairs factory should be repair id.",a),lastPostedRepair_id.object=a.data[0],console.log(lastPostedRepair_id)})},h=function(b){a.post("/customers",b).then(function(a){console.log("response in post customers factory, should be customer id.",a)})},i=function(b){a["delete"]("/repairs/"+b).then(function(a){console.log("response in factory, delete repair",a)})};return{test:d,customers:b,customerList:e,vehicles:c,vehicleList:f,postRepair:g,postCustomer:h,deleteRepair:i}}]),myApp.factory("HomeService",["$http",function(a){var b={},c=function(){a.get("/repairs").then(function(a){console.log("repairs in home factory get",a.data),b.object=a.data})},d=function(b){a.put("/repairs",b).then(function(a){console.log("updated repair in factory",a.data)})},e=function(b){console.log("before update",b),a.put("/customers",b).then(function(a){console.log("update customer in factory",a.data)})};return{getRepairs:c,repairs:b,updateRepair:d,updateCustomer:e}}]),myApp.factory("LoginService",["$http","$location","$window",function(a,b,c){test=" login injection is real";var d={},e=function(){c.location.href="/register"},f=function(){c.location.href="/"},g=function(d){a.post("/",d).then(function(a){console.log("response in factory login user.",a.data),a.data===!1?(console.log("it didnt work out"),b.path("/")):(console.log("redirect to index"),c.location.href="/index")})},h=function(b){a.post("/register",b).then(function(a){console.log("response in register user",a),c.location.href="/"})};return{test:test,login:g,register:h,user:d,goRegister:e,goLogin:f}}]),myApp.factory("PartsService",["$http",function(a){var b={},c=function(b){console.log(b),a.post("/parts",b).then(function(a){console.log(a)})},d=function(c){a.get("/parts/"+c).then(function(a){console.log(a.data),b.object=a.data})},e=function(b){a["delete"]("/parts/"+b).then(function(a){console.log("response in parts delete",a)})},f=function(a){for(var b=0;b<a.object.length;b++)g(a.object[b])},g=function(b){a.put("/parts",b).then(function(a){console.log("response in parts factory",a.data)})};return{postParts:c,getParts:d,parts:b,updatePart:f,deletePart:e}}]),myApp.factory("VehicleService",["$http",function(a){var b=new Date;b=b.getFullYear();var c=b,d=27,e=[],f={},g={},h=function(){for(;d>0;)e.push(c),c--,d--},i=function(b){a.get("/edmunds/"+b).then(function(a){console.log("response in vehicles api get make call",a.data.makes),f.object=a.data.makes})},j=function(b){console.log("vehicle in factory post call",b),a.post("/vehicles",b).then(function(a){console.log(a)})},k=function(b){console.log("vehicle in factory update call",b),a.put("/vehicles",b).then(function(a){console.log(a)})},l=function(b){console.log(b);var c=b.year,d=b.make,e=b.model;a.get("/edmunds/engine/"+c+"/"+d+"/"+e).then(function(a){console.log(a.data.styles),g.object=a.data.styles})};return{years:e,setYears:h,getMakes:i,makes:f,postVehicle:j,getEngines:l,engines:g,updateVehicle:k}}]);