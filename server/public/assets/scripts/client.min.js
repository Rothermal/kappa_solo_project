var myApp=angular.module("myApp",["ngRoute","ngMaterial","ngAnimate","md.data.table"]);myApp.config(["$routeProvider","$locationProvider","$mdThemingProvider",function(a,b,c){c.theme("docs-dark").primaryPalette("yellow").dark(),a.when("/",{templateUrl:"assets/views/templates/home.html",controller:"HomeController"}).when("/addcustomer",{templateUrl:"assets/views/templates/addcustomer.html",controller:"CustomerController"}).when("/addrepair",{templateUrl:"assets/views/templates/addrepair.html",controller:"RepairController"}).when("/addvehicle",{templateUrl:"assets/views/templates/addvehicle.html",controller:"VehicleController"}).when("/addparts",{templateUrl:"assets/views/templates/addparts.html",controller:"PartsController"}).otherwise({redirectTo:"/"}),b.html5Mode(!0)}]),myApp.controller("CustomerController",["$scope","CustomerService",function(a,b){var c=b;a.test=c.test,a.title="This is the Customer Controller",a.customer={},a.newCustomer=function(b){console.log(b),c.postCustomer(b),a.customer={}}}]),myApp.controller("HomeController",["$scope","$http","CustomerService","HomeService","PartsService","$mdDialog","$mdMedia",function(a,b,c,d,e,f,g){var h=c,i=d,j=e;a.repairTypeArray=["Starting and Charging","Engine Diagnostics","Engine Electrical","Engine Mechanical","Steering and Suspension","Heating and Cooling","Brakes","Maintenance"],a.test=h.test,a.title="This is the Home Controller",a.repairs=[],a.part={},a.parts=[],a.getRepairs=function(){i.getRepairs(),a.repairs=i.repairs},a.customFullscreen=g("xs")||g("sm"),a.getParts=function(a){console.log(a)},a.getParts=function(b){j.getParts(b),a.parts=j.parts},a.edit=function(b,c){console.log("hit edit"),console.log(c),a.repair=c;(g("sm")||g("xs"))&&a.customFullscreen;f.show({templateUrl:"/assets/views/templates/editRepair.html",parent:angular.element(document.body),targetEvent:b,clickOutsideToClose:!0,scope:a,preserveScope:!0}).then(function(b){a.getRepairs()},function(){a.status="You cancelled the dialog."}),a.$watch(function(){return g("xs")||g("sm")},function(b){a.customFullscreen=b===!0})},a.hide=function(){f.hide()},a.cancel=function(){f.cancel()},a.answer=function(a,b){f.hide(a),i.updateRepair(b),i.updateCustomer(b)},a.selected=[],a.query={order:"id",limit:10,page:1},a.getRepairs()}]),myApp.controller("LoginController",["$scope","CustomerService","LoginService",function(a,b,c){var d=b,e=c;a.User={},a.newUser={},a.test=d.test,a.title="Melancholy Motors . . .",a.login="Log in . . . to continue . . .",a.loginFunction=function(b){e.login(b),a.User={}},a.goRegister=function(){console.log("go register"),e.goRegister()},a.registerUser=function(b){console.log(b),b.password!==b.verifyPassword?(alert("passwords did not match, please try again"),a.newUser.password="",a.newUser.verifyPassword=""):(e.register(b),a.newUser={})}}]),myApp.controller("MainController",["$scope",function(a){a.title="WELCOME TO THE HALL OF PRESIDENTS",a.header="HEADER WITH HATS - SCARVES - SUnGLAASSSES SO SMOOTH",a.footer="I AM A SWEET THREE TOED LEFT FOOT WITH A DR SCHOLLS INSERT"}]),myApp.controller("PartsController",["$scope","CustomerService","PartsService",function(a,b,c){var d=b,e=c;a.lastRepair_id=d.lastRepair,a.parts=[],a.part={},a.addPart=function(b){var c=a.lastRepair_id;a.part.repair_id=c.object.id,console.log("clicked"),a.parts.push(b),a.part={}},a.postParts=function(){console.log(a.parts);for(var b=0;b<a.parts.length;b++)e.postParts(a.parts[b])}}]),myApp.controller("ProgressWheel",["$interval",function(a){var b=this;b.activated=!1,b.determinateValue=30,a(function(){b.determinateValue+=1,b.determinateValue>100&&(b.determinateValue=30)},100)}]),myApp.controller("RepairController",["$scope","CustomerService",function(a,b){function c(b){console.log("customer id",b),a.repair.customer_id=b}var d=b;a.repairTypeArray=["Starting and Charging","Engine Diagnostics","Engine Electrical","Engine Mechanical","Steering and Suspension","Heating and Cooling","Brakes","Maintenance"],a.customers=[],a.vehicles=[],a.repair={},a.test=d.test,a.title="This is the Repair Controller",a.getCustomers=function(){d.customerList()},a.getVehicles=function(a){console.log("clicked",a),d.vehicleList(a),c(a)},a.setVehicleid=function(b){console.log("vehicle id",b),a.repair.vehicle_id=b},a.postRepair=function(b){console.log(b),d.postRepair(b),a.repair={}},a.customers=d.customers,a.vehicles=d.vehicles,a.getCustomers()}]),myApp.controller("SidenavController",["$scope","$mdSidenav",function(a,b){a.toggleLeftMenu=function(){b("left").toggle()}}]),myApp.controller("VehicleController",["$scope","CustomerService","VehicleService",function(a,b,c){var d=c,e=b;a.customers=[],a.years=[],a.makes=[],a.models=[],a.engines=[],a.vehicle={},a.getCustomers=function(){e.customerList()},a.saveCustomerId=function(b){a.makes=[],a.models=[],a.engines=[],a.vehicle.year="",console.log("customer id",b),a.vehicle.customer_id=b,console.log("$scoped id",a.vehicle.customer_id)},a.getYearsArray=function(){a.years=d.years},a.getMakesList=function(b){a.makes=[],a.models=[],a.engines=[],a.vehicle.make="",a.vehicle.model="",a.vehicle.engine="",d.getMakes(b),a.makes=d.makes},a.getModelsList=function(b){a.models=[],a.engines=[];for(var c=0;c<b.models.length;c++)a.models.push(b.models[c])},a.getEngine=function(b){a.vehicle.model=b,a.engines=[],d.getEngines(a.vehicle),a.engines=d.engines},a.postVehicle=function(b){console.log(b),d.postVehicle(b),a.vehicle={}},a.customers=e.customers,a.getCustomers(),d.setYears(),a.getYearsArray()}]),console.log("grunt is watching"),myApp.factory("CustomerService",["$http",function(a){var b={},c={},d="Despondent Auto Repairs at Depressed Prices",e={},f=function(){a.get("/customers").then(function(a){console.log("customers in factory",a),b.object=a.data})},g=function(b){a.get("/vehicles/"+b).then(function(a){console.log("response in factory, vehicle list",a),c.object=a.data})},h=function(b){a.post("/repairs",b).then(function(a){console.log("response in post repairs factory should be repair id.",a),e.object=a.data[0],console.log(e)})},i=function(b){a.post("/customers",b).then(function(a){console.log("response in post customers factory, should be customer id.",a)})};return{test:d,customers:b,customerList:f,vehicles:c,vehicleList:g,postRepair:h,postCustomer:i,lastRepair:e}}]),myApp.factory("HomeService",["$http",function(a){var b={},c=function(){a.get("/repairs").then(function(a){console.log("repairs in home factory get",a.data),b.object=a.data})},d=function(b){a.put("/repairs",b).then(function(a){console.log("updated repair in factory",a.data)})},e=function(b){console.log("before update",b),a.put("/customers",b).then(function(a){console.log("update customer in factory",a.data)})};return{getRepairs:c,repairs:b,updateRepair:d,updateCustomer:e}}]),myApp.factory("LoginService",["$http","$location","$window",function(a,b,c){test=" login injection is real";var d={},e=function(){c.location.href="/register"},f=function(d){a.post("/",d).then(function(a){console.log("response in factory login user.",a.data),a.data===!1?(console.log("it didnt work out"),b.path("/")):(console.log("redirect to index"),c.location.href="/index")})},g=function(b){a.post("/register",b).then(function(a){console.log("response in register user",a),c.location.href="/"})};return{test:test,login:f,register:g,user:d,goRegister:e}}]),myApp.factory("PartsService",["$http",function(a){var b={},c=function(b){console.log(b),a.post("/parts",b).then(function(a){console.log(a)})},d=function(c){a.get("/parts/"+c).then(function(a){console.log(a.data),b.object=a.data})};return{postParts:c,getParts:d,parts:b}}]),myApp.factory("VehicleService",["$http",function(a){var b=new Date;b=b.getFullYear();var c=b,d=27,e=[],f={},g={},h=function(){for(;d>0;)e.push(c),c--,d--},i=function(b){a.get("/edmunds/"+b).then(function(a){console.log("response in vehicles api get make call",a.data.makes),f.object=a.data.makes})},j=function(b){console.log("vehicle in factory post call",b),a.post("/vehicles",b).then(function(a){console.log(a)})},k=function(b){console.log(b),year=b.year,make=b.make,model=b.model,a.get("/edmunds/engine/"+year+"/"+make+"/"+model).then(function(a){console.log(a.data.styles),g.object=a.data.styles})};return{years:e,setYears:h,getMakes:i,makes:f,postVehicle:j,getEngines:k,engines:g}}]);